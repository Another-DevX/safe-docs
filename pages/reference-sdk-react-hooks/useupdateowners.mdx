import { Tabs } from "nextra/components";

# `useUpdateOwners`

`(params?: UseUpdateOwnersParams): UseUpdateOwnersReturnType`

This is the hook to manage the owners of the Safe account. It provides methods to add a new owner, remove an existing one, and to swap an existing owner in favor of a new one.

## Usage

{/* <!-- vale off --> */}

<Tabs items={['App.tsx', 'main.tsx']}>
  <Tabs.Tab>
    ```typescript
    import { useUpdateOwners } from '@safe-global/safe-core-sdk-react-hooks'
    
    function App() {
      const { add, remove, swap } = useUpdateOwners()

      const handleAddOwner = () => {
        add.addOwner({ ownerAddress: '0x...' })
      }

      const handleRemoveOwner = () => {
        remove.removeOwner({ ownerAddress: '0x...' })
      }

      const handleSwapOwner = () => {
        swap.swapOwner({
          oldOwnerAddress: '0x...',
          newOwnerAddress: '0x...'
        })
      }

      const isError = add.isError || remove.isError || swap.isError;
      const error = add.error || remove.error || swap.error;
      const data = add.data || remove.data || swap.data;

      return (
        <div>
          <button onClick={handleAddOwner} disabled={add.isLoading}>
            Add Owner
          </button>
          <button onClick={handleRemoveOwner} disabled={remove.isLoading}>
            Remove Owner
          </button>
          <button onClick={handleSwapOwner} disabled={swap.isLoading}>
            Swap Owner
          </button>
          {isError && <p>Error: {error.message}</p>}
          {data && <p>Update Owner Transaction sent: {JSON.stringify(data)}</p>}
        </div>
      )
    }
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```typescript
    import ReactDOM from 'react-dom/client'
    import { createConfig, SafeProvider } from '@safe-global/safe-core-sdk-react-hooks'
    import { sepolia } from 'viem/chains'
    import App from './App.tsx  '

    const config = createConfig({
      chain: sepolia,
      provider,
      signer,
      safeAddress: '0x...'
    })

    const root = document.getElementById('root')
    
    ReactDOM.createRoot(root).render(
      <SafeProvider config={config}>
        <App />
      </SafeProvider>
    )
    ```
  </Tabs.Tab>
</Tabs>

{/* <!-- vale on --> */}

## Parameters

- `params` (UseUpdateOwnersParams, optional): Parameters to customize the hook behavior. It contains:
  - `config` (SafeConfigWithSigner, optional): The [`SafeConfigWithSigner`](./safeconfig.mdx#safeconfigwithsigner) is used instead of the one provided by the nearest `SafeProvider` in the component tree.

## Returns

### `add`

- The react-query [`UseMutationResult`](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation).
- The `mutate` and `mutateAsync` functions have been renamed to `addOwner` and `addOwnerAsync` respectively. The other properties in the return type remain unchanged, and the behavior is still the same as described in the docs.

#### `addOwner`

`UseMutateFunction<SafeClientResult, Error, AddOwnerVariables, unknown>`

Function for sending a transaction to add a new owner. It's a react-query [`mutate`](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation) function.

##### Parameters

- `AddOwnerVariables`: Variables to add an owner.
  - `ownerAddress` (string): The address of the new owner.
  - `threshold` (number, optional): New threshold value.

##### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the result of the transaction that added the owner.

#### `addOwnerAsync`

`UseMutateAsyncFunction<SafeClientResult, Error, AddOwnerVariables, unknown>`

Asynchronous function for sending a transaction to add a new owner. It's a react-query [`mutateAsync`](https://tanstack.com/query/v4/docs/framework/react/reference/useMutation) function.

##### Parameters

- `AddOwnerVariables`: Variables to add an owner.
  - `ownerAddress` (string): The address of the new owner.
  - `threshold` (number, optional): New threshold value.

##### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the result of the transaction that added the owner.

### `remove`

- The react-query [`UseMutationResult`](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation).
- The `mutate` and `mutateAsync` functions have been renamed to `removeOwner` and `removeOwnerAsync` respectively. The other properties in the return type remain unchanged, and the behavior is still the same as described in the docs.

#### `removeOwner`

`UseMutateFunction<SafeClientResult, Error, RemoveOwnerVariables, unknown>`

Function for sending a transaction to remove an existing owner. It's a react-query [`mutate`](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation) function.

##### Parameters

- `RemoveOwnerVariables`: Variables to remove an owner.
  - `ownerAddress` (string): The address of the owner that will be removed.
  - `threshold` (number, optional): New threshold value.

##### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the result of the transaction that removed the owner.

#### `removeOwnerAsync`

`UseMutateAsyncFunction<SafeClientResult, Error, RemoveOwnerVariables, unknown>`

Asynchronous function for sending a transaction to remove an existing owner. It's a react-query [`mutateAsync`](https://tanstack.com/query/v4/docs/framework/react/reference/useMutation) function.

##### Parameters

- `RemoveOwnerVariables`: Variables to remove an owner.
  - `ownerAddress` (string): The address of the owner that will be removed.
  - `threshold` (number, optional): New threshold value.

##### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the result of the transaction that removed the owner.

### `swap`

- The react-query [`UseMutationResult`](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation).
- The `mutate` and `mutateAsync` functions have been renamed to `swapOwner` and `swapOwnerAsync` respectively. The other properties in the return type remain unchanged, and the behavior is still the same as described in the docs.

#### `swapOwner`

`UseMutateFunction<SafeClientResult, Error, SwapOwnerVariables, unknown>`

Function for sending a transaction to swap an owner. It's a react-query [`mutate`](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation) function.

##### Parameters

- `SwapOwnerVariables`: Variables to swap an owner.
  - `oldOwnerAddress` (string | [PasskeyArgType](https://github.com/safe-global/safe-core-sdk/blob/dc602ed126cc210048b278b2372c0979ee4be62b/packages/protocol-kit/src/types/passkeys.ts#L6-L10)): The old owner's address or passkey.
  - `newOwnerAddress` (string | [PasskeyArgType](https://github.com/safe-global/safe-core-sdk/blob/dc602ed126cc210048b278b2372c0979ee4be62b/packages/protocol-kit/src/types/passkeys.ts#L6-L10)): The new owner's address or passkey.

##### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the result of the transaction that swapped the owner.

#### `swapOwnerAsync`

`UseMutateAsyncFunction<SafeClientResult, Error, SwapOwnerVariables, unknown>`

Asynchronous function for sending a transaction to swap an owner. It's a react-query [`mutateAsync`](https://tanstack.com/query/v4/docs/framework/react/reference/useMutation) function.

##### Parameters

- `SwapOwnerVariables`: Variables to swap an owner.
  - `oldOwnerAddress` (string | [PasskeyArgType](https://github.com/safe-global/safe-core-sdk/blob/dc602ed126cc210048b278b2372c0979ee4be62b/packages/protocol-kit/src/types/passkeys.ts#L6-L10)): The old owner's address or passkey.
  - `newOwnerAddress` (string | [PasskeyArgType](https://github.com/safe-global/safe-core-sdk/blob/dc602ed126cc210048b278b2372c0979ee4be62b/packages/protocol-kit/src/types/passkeys.ts#L6-L10)): The new owner's address or passkey.

##### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the result of the transaction that swapped the owner.

## Caveats

The `addOwner`, `addOwnerAsync`, `removeOwner`, `removeOwnerAsync`, `swapOwner` and `swapOwnerAsync` methods are used to send a transaction to update the owners of a Safe account. They cover transaction flows that you would typically need to implement yourself if you're using a more advanced kit, such as the `protocol-kit` in conjunction with the `api-kit`.

The owners can only be updated by the existing owners of the Safe and only if the Safe account is already deployed (you are using `safeAddress` or the `safeOptions` counterfactual address prediction derives an existing Safe account). If being used for a Safe account that has not been deployed yet, the methods will fail before sending the transaction.

We can distinguish two main cases when using these methods:

- In the case the Safe is a multisig account (more than one owner and threshold greater than 1), the methods will propose a transaction to update the owners. The transaction is not sent to the blockchain immediately, but is stored in our Transaction Service. This is because you need more signatures than just the one for the `signer` used to create the client.
- In the case the Safe is a single-owner account (threshold equal to 1), the transaction to update the owners is sent directly to the blockchain without being stored in our services, as it is not necessary.
