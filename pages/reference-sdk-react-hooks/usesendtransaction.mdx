import { Tabs } from 'nextra/components'

# `useSendTransaction`

`(params?: UseSendTransactionParams): UseSendTransactionReturnType`

## Usage

{/* <!-- vale off --> */}

<Tabs items={['App.tsx', 'main.tsx']}>
  <Tabs.Tab>
    ```typescript
    import { useSendTransaction } from '@safe-global/safe-core-sdk-react-hooks'
    
    function App() {
      const {
        sendTransaction,
        isLoading,
        isError,
        data,
        error
      } = useSendTransaction()

      const handleSendTransaction = () => {
        sendTransaction({
          transactions: [{
              to: '0x...',
              value: '0x...',
              data: '0x...'
          }]
        })
      }

      return (
        <>
          <button onClick={handleSendTransaction} disabled={isLoading}>
            Send Transaction
          </button>
          {isError && <p>Error: {error.message}</p>}
          {data && <p>Transaction sent: {JSON.stringify(data)}</p>}
        </>
      )
    }

    export default App
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```typescript
    import ReactDOM from 'react-dom/client'
    import { createConfig, SafeProvider } from '@safe-global/safe-core-sdk-react-hooks'
    import App from './App.tsx'

    const config = createConfig({
      chain,
      provider,
      signer,
      safeOptions: {
        owners,
        threshold
      }
    })

    ReactDOM.createRoot(document.getElementById('root')!).render(
      <SafeProvider config={config}>
        <App />
      </SafeProvider>
    )
    ```
  </Tabs.Tab>
</Tabs>

{/* <!-- vale on --> */}

## Parameters

- `params` (UseSendTransactionParams, optional): Parameters to customize the hook behavior. It contains:
  - `config` (SafeConfigWithSigner, optional): The [`SafeConfigWithSigner`](./safeconfig.mdx#safeconfigwithsigner) is used instead of the one provided by the nearest `SafeProvider` in the component tree.

## Returns 

- The react-query [`UseMutationResult`](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation).
- The `mutate` and `mutateAsync` functions have been renamed to `sendTransaction` and `sendTransactionAsync` respectively. The other properties in the return type remain unchanged, and the behavior is still the same described in the docs.

### `sendTransaction`

`UseMutateFunction<SafeClientResult, Error, SendTransactionVariables, unknown>`

Function to send the transaction. It's a react-query [`mutate`](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation) function

#### Parameters

- `SendTransactionVariables`: Variables to send the transactions.
  - `transactions` (Transaction[]): List of transactions to send.
    - `to` (string): Address of the recipient.
    - `value` (string): Value to send.
    - `data` (string): Data to send.

#### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the transaction result.

### `sendTransactionAsync`

`UseMutateAsyncFunction<SafeClientResult, Error, SendTransactionVariables, unknown>`

Asynchronous function to send the transaction. It's a react-query [`mutateAsync`](https://tanstack.com/query/v4/docs/framework/react/reference/useMutation) function

#### Parameters

- `SendTransactionVariables`: Variables to send the transaction.
  - `transactions` (Transaction[]): List of transactions to send.
    - `to` (string): Address of the recipient.
    - `value` (string): Value to send.
    - `data` (string): Data to send.

#### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the transaction result.

## Caveats

The `sendTransaction` and `sendTransactionAsync` methods are used to send transactions from your Safe account. It covers various transaction flows that you would typically need to implement yourself if you're using a more advanced kit, such as the `protocol-kit` in conjunction with the `api-kit`. You can send an array to transactions (to, value, data) that we will convert to a transaction batch.

We can distinguish two main cases when using these methods:

If the Safe account is already deployed (you are using `safeAddress` or the `safeOptions` counterfactual address prediction derives an existing Safe account):

  - In the case the Safe is a multisig account (more than one owner and threshold greater than 1), the methods will propose the transaction to our Transaction Service. The transaction is not sent to the blockchain immediately, but is stored in our services. This is because you need more signatures than just the one for the `signer` used to create the client.
  - In the case the Safe is a single-owner account (threshold equal to 1), the transaction is sent directly to the blockchain without being stored in our services, as it is not necessary.

If the Safe account has not yet been deployed (you are using `safeOptions` and the counterfactual address prediction results in a non-existing Safe account):

  - In the case the Safe is a multisig account, the methods will propose the transaction to our Transaction Service, just as in the previous case. However, the Safe account will be deployed using the funds in the current `signer` account.
  - In the case the Safe is a single-owner account, the transaction is sent directly to the blockchain without being stored in our services. The Safe account will be deployed using the funds in the current `signer` account.
  